{% extends "bootstrap/base.html" %}
{% import "bootstrap/fixes.html" as fixes %}
{% import "bootstrap/utils.html" as util %}


{% block styles %}
    {{super()}}
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <style>
	    #map {
		    /*
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
	    right: 0;
	    */
	    height: 600px;
        }

    </style>
{% endblock %}

{% block scripts %}
{{super()}}
<script type="text/javascript">
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>  

<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet-src.js"></script>
<script src="{{url_for('.static', filename='js/leaflet-realtime.js')}}"></script>

<script type="text/javascript">
var map = L.map('map'),
    realtime = L.realtime({
        url: 'http://wanderdrone.appspot.com/',
        //url: $SCRIPT_ROOT + 'random_gen',
        crossOrigin: true,
        type: 'json'
    }, {
        interval: 4000
    }).addTo(map);

L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

//L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
//   maxZoom: 18,
//   attribution: 'Map data &contentpy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
//       '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
//       'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
//   id: 'examples.map-20v6611k'
//}).addTo(map);


realtime.on('update', function() {
    map.fitBounds(realtime.getBounds(), {maxZoom: 2});
    console.log("debug", $SCRIPT_ROOT);
});

</script>  

{% endblock %}

{% block navbar %}
   <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
{% endblock %}

{% block content %}

 <!-- Subhead ================================================== -->
<header class="jumbotron 	subhead">
<!--[if lt IE 8]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
</header>

  <!-- http://bl.ocks.org/zross/9457fde53777fb8d33d8 -->
<div class="container">
  <div class="row">
    <div class="col-md-12">
 
    </div>

  </div>
  <div class="row">
    <div class="col-md-12">
	<div id="map">
	</div>
    </div>
  </div>
</div>

   <footer class="footer">
        <div class="container">
        <p class="text-muted">Place sticky footer content here.</p>
       </div>
           </footer>



{% endblock %}
